This wiki page will take you through on how to use JAXL Client library

= Introduction =

JAXL Client Library is highly structured. There is a base XMPP class library _(xmpp.class.php)_ and a JAXL class library _(jaxl.class.php)_ which is derived from the base XMPP class library.

Base XMPP class library implements the XMPP protocol and also provides you with two extendable methods named _eventMessage()_ and _eventPresence()_. These methods are internally called when a message or presence XML Stanza is received from the Jabber server.

You should have a look at included _jaxl.class.php_ and modify extended eventMessage() and eventPresence() methods as required.

This library includes the following files:

== Example key.db.class ==
{{{
  $env = "prod";
  
  $key = array("prod"=>array("user"=>"myproduction",
                             "pass"=>"password",
                             "host"=>"talk.google.com",
                             "port"=>5222,
                             "domain"=>"gmail.com"
                            ),
              "devel"=>array("user"=>"abhinavsingh",
                             "pass"=>"password",
                             "host"=>"localhost",
                             "port"=>5222,
                             "domain"=>"localhost"
                            )
              );
}}}


== Example JAXL Class ==
{{{
  /* Include Base XMPP Class */
  include_once("xmpp.class.php");
  
  class JAXL extends XMPP {
    
    function eventMessage($fromJid, $content, $offline = FALSE) {
      // Take necessary action when a message is received 
      $this->sendMessage($fromJid,"Hi, Thanks for your message");
    }
    
    function eventPresence($fromJid, $status, $photo) {
      // Take necessary action when a presence is received
    }
    
  }
}}}

== Final index.php ==
{{{
  /* Include Key file */
  include_once("key.db.php");
  
  /* Create an instance of XMPP Class */
  $jaxl = new JAXL($key[$env]['host'],
                   $key[$env]['port'],
                   $key[$env]['user'],
                   $key[$env]['pass'],
                   $key[$env]['domain']
                  );
  
  try {
    /* Initiate the connection */
    $jaxl->connect();
    
    /* Communicate with Jabber Server */
    while($jaxl->isConnected) {
      $jaxl->getXML();
    }
  }
  catch(Exception $e) {
    die($e->getMessage());
  }
}}}